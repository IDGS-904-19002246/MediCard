{% extends "layout.html" %}

{% block content %}
{% from '_macros.html' import render_firld2 %}
<div class="bg-light p-1"></div>

<div class="p-4 fondo" style="--f:url(../static/img/fondo1.jpg)">
    <h2 class="text-light text-center" style="font-family: 'Cubano', sans-serif;">Datos de Nuevo Producto</h2>

    
    <div class="p-4 mt-2 g-danger" style="border-radius: 32px 8px 32px 32px;">

        <form action="productos_añadir" method="POST" id="producto" enctype="multipart/form-data" class="text-light" >
            <div class="row">

                <div class="col-sm-4">
                    <div class="m-2">
                        <input type="file" class="w-100" name="img" id="imgInp" required>
                        <div class="m-2"><img class="w-50" id="blah" src="#" alt="NoHayImagen"></div>
                    </div>
                </div>
                
                <div class="col-sm-8">
                    <div class="m-2">{{render_firld2(form.nombre, class='form-control')}}</div>

                    <div class="row">
                        <div class="col-6">
                            <div class="m-2">{{render_firld2(form.cantidad, class='form-control')}}</div>
                        </div>
                        <div class="col-6">
                            <div class="m-2">{{render_firld2(form.cantidad_min, class='form-control')}}</div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-6">
                            <div class="m-2">{{render_firld2(form.precio_U, class='form-control')}}</div>
                        </div>
                        <div class="col-6">
                            <div class="m-2">{{render_firld2(form.precio_M, class='form-control')}}</div>
                        </div>
                    </div>
                    
                    <div class="m-2">{{render_firld2(form.descripcion, class='form-control')}}</div>
                    <div class="m-2">{{render_firld2(form.proceso, class='form-control')}}</div>

                    <input type="hidden" name="csrf_token" value="{{csrf_token()}}" />
                    <button type="submit" class="btn btn-light w-20" form="producto">Guardar</button>
                    <button type="button" class="btn btn-light w-20" onclick="resetear('producto')">Limpiar Datos</button>
                    <a href="productos_admin"><button type="button" class="btn btn-light w-20">Atrás</button></a>

                </div>
            </div>
        </form>
    </div>
</div>
</div>
<script>
    function resetear(id){
        $('#producto')[0].reset();
        $('#blah')[0].src = '#'
    }
    function readURL(input) {
    if (input.files && input.files[0]) { //Revisamos que el input tenga contenido
        var reader = new FileReader(); //Leemos el contenido
        reader.onload = function(e) { //Al cargar el contenido lo pasamos como atributo de la imagen de arriba
        $('#blah').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
    }
    }

    $("#imgInp").change(function() { //Cuando el input cambie (se cargue un nuevo archivo) se va a ejecutar de nuevo el cambio de imagen y se verá reflejado.
    readURL(this);
    });


</script>

{% endblock content %}